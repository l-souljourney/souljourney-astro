# Changelog

## v1.6.1 (2025-11-22)

### 架构升级：Astro View Transitions

本次更新完成了从 Swup 到 Astro 原生 View Transitions 的迁移，并修复了暗黑模式在页面切换时的持久化问题。

#### 变更详情

1.  **移除 Swup 依赖**
    -   **移除**: 卸载 `@swup/astro` 及相关插件。
    -   **收益**: 减少第三方依赖，降低维护成本，避免脚本生命周期冲突。

2.  **启用 Astro View Transitions**
    -   **新增**: 引入 `<ClientRouter />` 组件，启用浏览器原生视图过渡。
    -   **效果**: 保持了 SPA 般的无刷新页面切换体验，同时利用原生 API 提升性能。

3.  **暗黑模式修复**
    -   **修复**: 解决了 View Transitions 模式下页面切换导致暗黑模式重置的问题。
    -   **机制**: 使用 `astro:page-load` 事件确保每次导航后重新应用主题状态。

4.  **代码优化**
    -   **重构**: 简化 `src/scripts/Init.ts` 和 `src/utils/updateRouter.ts`，统一使用 Astro 生命周期事件。

---

## v1.6.0 (2025-11-21)

### Astro 框架升级与 SVG 优化

本次更新将 Astro 框架从 5.9.2 升级到最新的 5.16.0，并启用了实验性的 SVG 自动优化功能，进一步提升网站性能和加载速度。

#### 变更详情

1.  **Astro 核心框架升级**
    -   **升级**: Astro 从 v5.9.2 升级到 v5.16.0
    -   **收益**: 获得最新的性能优化、Bug 修复和新特性支持
    -   **兼容性**: 完全向后兼容，无破坏性变更

2.  **官方集成升级**
    -   **@astrojs/mdx**: v4.2.6 → v4.3.12
    -   **@astrojs/rss**: v4.0.11 → v4.0.14
    -   **@astrojs/sitemap**: v3.4.0 → v3.6.0
    -   **结果**: 所有集成保持最新，获得 bug 修复和性能提升

3.  **SVG 自动优化（实验性功能）**
    -   **新特性**: 启用 SVGO 实验性功能，构建时自动优化 SVG 文件
    -   **效果**: 压缩 29 个 SVG 文件，减少 2.58 KB 文件体积
    -   **优化范围**: 导航图标、Logo、微信公众号二维码等所有 SVG 资源
    -   **平均压缩率**: 2-50%，显著提升加载速度

4.  **构建优化**
    -   **构建时间**: 保持在 3.23 秒
    -   **产物大小**: 52 MB
    -   **压缩效果**: HTML、JavaScript、SVG、JSON 全部自动压缩

5.  **功能验证**
    -   **测试范围**: 首页、文章页、暗黑模式、搜索、导航、页面切换
    -   **测试结果**: 所有功能正常，无兼容性问题
    -   **用户体验**: 无感知升级，保持原有功能

#### 技术亮点

-   使用官方 `@astrojs/upgrade` 工具一键升级
-   SVG 优化在构建时自动执行，零配置
-   完整的浏览器功能测试验证
-   Git 提交记录完整，便于版本追溯

---

## v1.5.0 (2025-11-21)

### 暗黑模式修复与优化

本次更新主要修复了暗黑模式下的配色问题、导航栏高亮逻辑错误以及页面布局对齐问题。

#### 变更详情

1.  **底部（Footer）配色优化**
    -   **修改**: 将硬编码的颜色替换为 CSS 变量，并添加了专门的暗黑模式样式覆盖 (`html.dark .vh-footer`)。
    -   **结果**: 底部区域现在能完美适配暗黑模式，背景色和文字对比度更加舒适。

2.  **"浙商" 404 页面高亮修复**
    -   **修改**: 在 Frontmatter 中添加了 `type: "404"`。
    -   **结果**: 修复了当访问空分类（如"浙商"）显示 404 页面时，菜单栏错误高亮 "AI时代" 的问题。

3.  **文章页导航高亮修正**
    -   **修改**: 将 `activeNav` 属性从写死的 `"archives"` 改为动态获取的 `{post.data.categories}`。
    -   **结果**: 阅读文章时，菜单栏会正确高亮文章所属的分类（如"活着"、"投资路"），而不是一直高亮"昔日"。

4.  **TOC 目录对齐修复**
    -   **修改**: 将 `top` 值调整为 `91px`（原为 80px），并添加 `z-index: 10`。
    -   **结果**: 目录栏顶部与文章标题完美对齐，且滚动时保持稳定。

5.  **归档列表点击发白修复**
    -   **修改**: 添加了暗黑模式下的悬停（Hover）样式。
    -   **结果**: 修复了在暗黑模式下点击或悬停分类文章标题时出现的白色闪烁问题。

---

## v1.4.9 (2025-11-20)

### 暗黑模式功能实现

-   **新特性**: 正式引入暗黑模式切换功能，支持手动切换和系统自动跟随。
-   **样式**: 优化了暗黑模式下的菜单栏和基础配色。

## v1.4.8 (2025-11-20)

### 体验优化与修复

-   **修复**: 修复了页面切换时头像闪烁的问题。
-   **修复**: 修复了文章页字数统计和阅读时长显示缺失的问题。

## v1.4.7 (2025-11-19)

### 文章目录 (TOC)

-   **新特性**: 新增文章右侧悬浮目录 (TOC) 功能。
    -   支持平滑滚动跳转。
    -   支持当前阅读章节自动高亮。
    -   响应式设计，在移动端自动隐藏。

---

## v1.4.6 (2025-08-01)

### 构建流程优化

-   **构建**: 移除 develop 分支的冗余构建步骤，专注于 main 分支的生产发布。
-   **修复**: 修复 CNB 构建中 develop 分支同步失败及推送到错误仓库的问题。
-   **文档**: 完善 README 文档结构。

## v1.4.5 (2025-08-01)

### 自动同步功能

-   **新特性**: 优化 CNB 构建配置，新增自动同步 develop 分支功能，确保开发分支与主分支保持同步。

## v1.4.4 (2025-07-28)

### 内容更新

-   **内容**: 更新 "关于我" 页面内容，优化个人介绍信息。

## v1.4.3 (2025-07-28)

### 分类系统优化

-   **修复**: 修复文章分类路径的中文显示问题。
-   **新特性**: 实现分类映射功能 (Category Mapping)，支持 URL 路径为英文（利于 SEO），前端显示为中文名称。

## v1.4.2 (2025-07-28)

### 路径优化

-   **优化**: 全面更新分类路径为英文，提升 URL 可读性和 SEO 友好度。

## v1.4.1 (2025-07-24)

### 样式与文案修正

-   **修复**: 修复文章标签 SVG 图标样式显示异常的问题。
-   **内容**: 更新公众号描述文案。

---

## v1.4.0 (2025-06-26)

### 导航系统重构

-   **重构**: 重构博客导航系统和分类体系，提供更清晰的浏览体验。

## v1.3.0 (2025-06-25)

### 性能优化

-   **优化**: 网站功能精简与性能优化，提升加载速度。

## v1.2.0 (2025-06-25)

### 备案信息更新

-   **优化**: ICP 备案徽章显示优化。
-   **内容**: 更新网站底部基础信息。

## v1.1 (2025-06-24)

### 功能精简

-   **优化**: 博客功能精简与整体代码优化。

## v1.0.0 (2025-06-23)

### 初始发布

-   **发布**: SoulJourney Blog 初始版本发布。
-   **部署**: 配置 CNB 自动化构建流程。
    -   支持腾讯云 COS 静态资源部署。
    -   支持 GitHub 代码自动同步。
    -   配置双线部署架构。
-   **文档**: 添加产品说明文档和部署指南。
